<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Build a character for use in Dungeons and Dragons 5th Edition 2024!">
  <meta name="keywords" content="DnD, 27, point, buy, 5e, 2024, 5e2024, characterbuilder, fifth, edition, dungeon, dragon, dungeonsanddragons, D&D">
  <meta name="author" content="BirddieSoftware">
  <title>DnD 5e 2024 Character Builder</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
	  flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #f5f5f5;
    }

    .container {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .row {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .label {
      width: 100px;
      text-align: right;
    }

    .box {
      display: flex;
      flex-direction: row;
      align-items: center;
      padding: 20px;
      border: 1px solid #ccc;
      background-color: #fff;
      border-radius: 10px;
      width: 80px;
    }
	
	.value-control {
		display: flex;
		flex-direction: column;
		padding-left: 20px;
	}

    .mod.modifiable {
      background-color: #25c4e8;
	  border-radius: 5px;
	  font-size: 124px;
    }

    .value {
      font-size: 24px;
      margin-bottom: 10px;
	  width: 25px;
	  text-align: center;
    }
	
	.operator {
		font-size: 24px;
		text-align: center;
		width: 100px;
	}

    button {
      width: 30px;
      height: 30px;
      font-size: 16px;
      margin: 5px;
	  cursor: pointer;
	  padding: 0px;
    }

    .price-pool {
      text-align: center;
      margin-top: 20px;
    }
	
	.table-sel {
		background-color: #bfe3eb;
		padding: 10px 20px;
		border-radius: 20px;
		border-style: solid;
		border-width: 3px;
		border-color: #3a6e7a
		text-align: center;
	}
	
	.tab-head {
		 border-bottom-width: 2px;
		 border-bottom-style: solid;
		 border-bottom-color: #000000;
	}
	
	
    select {
      margin-bottom: 20px;
    }
	
	.player-form {
		display: flex;
		flex-direction: column;
		max-width: 300px;
		margin: 20px auto;
		font-family: Arial, sans-serif;
	}

	label {
		margin-top: 10px;
		font-weight: bold;
	}

	input, select {
		padding: 8px;
		font-size: 14px;
		margin-top: 5px;
	}

	#subrace-container {
		margin-top: 10px;
	}

	.table-header {
		display: flex;
		flex-direction: row;
	}
	
	.class-button {
		width: fit-content;
		border-radius: 5px;
		border-width: 1px;
		padding: 5px;
		margin-left: 20px;
	}
	
  </style>
</head>
<body>


	<div class="player-form">
		<label for="playerName">Character Name:</label>
		<input type="text" id="playerName" name="playerName" placeholder="Enter character name">

		<label for="race">Race:</label>
		<select id="race" name="race" onchange="handleRaceChange()">
			<option value="" disabled selected>Select your race</option>
			<option value="Aasimar">Aasimar</option>
			<option value="Dragonborn">Dragonborn</option>
			<option value="Dwarf">Dwarf</option>
			<option value="Elf">Elf</option>
			<option value="Gnome">Gnome</option>
			<option value="Goliath">Goliath</option>
			<option value="Halfling">Halfling</option>
			<option value="Human">Human</option>
			<option value="Orc">Orc</option>
			<option value="Tiefling">Tiefling</option>
		</select>

		<!-- Subrace dropdown will be hidden initially -->
		<div id="subrace-container" style="display: none;">
			<label for="subrace">Subrace:</label>
			<select id="subrace" name="subrace">
		<!-- Options will be dynamically inserted based on race -->
			</select>
		</div>

		<label for="class">Class:</label>
		<select id="class" name="class">
			<option value="" disabled selected>Select your class</option>
			<option value="Barbarian">Barbarian</option>
			<option value="Bard">Bard</option>
			<option value="Cleric">Cleric</option>
			<option value="Druid">Druid</option>
			<option value="Fighter">Fighter</option>
			<option value="Monk">Monk</option>
			<option value="Paladin">Paladin</option>
			<option value="Ranger">Ranger</option>
			<option value="Rogue">Rogue</option>
			<option value="Sorcerer">Sorcerer</option>
			<option value="Warlock">Warlock</option>
			<option value="Wizard">Wizard</option>
		</select>
	</div>


	
		<div class="container">
			<div class="table-header">
				<label for="roleSelect">Select Background: </label>
				<select style="margin-left:10px" id="roleSelect" onchange="updateRole()">
					<option value="">--Select a Background--</option>
					<option value="Acolyte">Acolyte (Intelligence, Wisdom, Charisma)</option>
					<option value="Artisan">Artisan (Strength, Dexterity, Intelligence)</option>
					<option value="Charlatan">Charlatan (Dexterity, Constitution, Charisma)</option>
					<option value="Criminal">Criminal (Dexterity, Constitution, Intelligence)</option>
					<option value="Entertainer">Entertainer (Strength, Dexterity, Charisma)</option>
					<option value="Farmer">Farmer (Strength, Constitution, Wisdom)</option>
					<option value="Guard">Guard (Strength, Intelligence, Wisdom)</option>
					<option value="Guide">Guide (Dexterity, Constitution, Wisdom)</option>
					<option value="Hermit">Hermit (Constitution, Wisdom, Charisma)</option>
					<option value="Merchant">Merchant (Constitution, Intelligence, Charisma)</option>
					<option value="Noble">Noble (Strength, Intelligence, Charisma)</option>
					<option value="Sage">Sage (Constitution, Intelligence, Wisdom)</option>
					<option value="Sailor">Sailor (Strength, Dexterity, Wisdom)</option>
					<option value="Scribe">Scribe (Dexterity, Intelligence, Wisdom)</option>
					<option value="Soldier">Soldier (Strength, Dexterity, Constitution)</option>
					<option value="Wayfarer">Wayfarer (Dexterity, Wisdom, Charisma)</option>
				</select>
				
				<div>
					<button class="class-button" onclick="classStats()">Class Recommended Stats</button>
				</div>
				
			</div>
		
	

	<table class="table-sel">
  <thead>
    <tr>
      <th class="tab-head" style="width: 16%">Ability</th>
      <th class="tab-head" style="width: 16%">Base Score</th>
	  <th class="tab-head" style="width: 10%"></th>
      <th class="tab-head" style="width: 16%">Background Modifier</th>
	  <th class="tab-head" style="width: 10%"></th>
      <th class="tab-head" style="width: 16%">Total</th>
	  <th class="tab-head" style="width: 16%">Ability Modifier</th>
    </tr>
  </thead>
  <tbody>
  
    <tr>
		<td>Strength</td>
		<td>
			<div><table><tbody><tr>
				<td>
					<div class="value" id="value1">8</div>
				</td>
				<td>
					<div class="value-control">
					<button onclick="increment(1)">▲</button>
					<button onclick="decrement(1)">▼</button>
					</div>
				</td>
			</tr></tbody></table></div>
		</td>
		<td class="operator">+</td>
		<td>
			<div class="mod" id="modBox1"><table><tbody><tr>
				<td>
					<div class="value" id="mod1">0</div>
				</td>
				<td>
					<div class="value-control">
					<button onclick="modIncrement(1)">▲</button>
					<button onclick="modDecrement(1)">▼</button>
					</div>
				</td>
			</tr></tbody></table></div>
		</td>
		<td class="operator">=</td>
		<td class="value" id="total1">8
		</td>
		<td class="value" id="abilityMod1">-1
		</td>
	</tr>

	<tr>
		<td>Dexterity</td>
		<td>
			<div><table><tbody><tr>
				<td>
					<div class="value" id="value2">8</div>
				</td>
				<td>
					<div class="value-control">
					<button onclick="increment(2)">▲</button>
					<button onclick="decrement(2)">▼</button>
					</div>
				</td>
			</tr></tbody></table></div>
		</td>
		<td class="operator">+</td>
		<td>
			<div class="mod" id="modBox2"><table><tbody><tr>
				<td>
					<div class="value" id="mod2">0</div>
				</td>
				<td>
					<div class="value-control">
					<button onclick="modIncrement(2)">▲</button>
					<button onclick="modDecrement(2)">▼</button>
					</div>
				</td>
			</tr></tbody></table></div>
		</td>
		<td class="operator">=</td>
		<td class="value" id="total2">8
		</td>
		<td class="value" id="abilityMod2">-1
		</td>
	</tr>
	
    <tr>
		<td>Constitution</td>
		<td>
			<div><table><tbody><tr>
				<td>
					<div class="value" id="value3">8</div>
				</td>
				<td>
					<div class="value-control">
					<button onclick="increment(3)">▲</button>
					<button onclick="decrement(3)">▼</button>
					</div>
				</td>
			</tr></tbody></table></div>
		</td>
		<td class="operator">+</td>
		<td>
			<div class="mod" id="modBox3"><table><tbody><tr>
				<td>
					<div class="value" id="mod3">0</div>
				</td>
				<td>
					<div class="value-control">
					<button onclick="modIncrement(3)">▲</button>
					<button onclick="modDecrement(3)">▼</button>
					</div>
				</td>
			</tr></tbody></table></div>
		</td>
		<td class="operator">=</td>
		<td class="value" id="total3">8
		</td>
		<td class="value" id="abilityMod3">-1
		</td>
	</tr>
	
    <tr>
		<td>Intelligence</td>
		<td>
			<div><table><tbody><tr>
				<td>
					<div class="value" id="value4">8</div>
				</td>
				<td>
					<div class="value-control">
					<button onclick="increment(4)">▲</button>
					<button onclick="decrement(4)">▼</button>
					</div>
				</td>
			</tr></tbody></table></div>
		</td>
		<td class="operator">+</td>
		<td>
			<div class="mod" id="modBox4"><table><tbody><tr>
				<td>
					<div class="value" id="mod4">0</div>
				</td>
				<td>
					<div class="value-control">
					<button onclick="modIncrement(4)">▲</button>
					<button onclick="modDecrement(4)">▼</button>
					</div>
				</td>
			</tr></tbody></table></div>
		</td>
		<td class="operator">=</td>
		<td class="value" id="total4">8
		</td>
		<td class="value" id="abilityMod4">-1
		</td>
	</tr>
	
    <tr>
		<td>Wisdom</td>
		<td>
			<div><table><tbody><tr>
				<td>
					<div class="value" id="value5">8</div>
				</td>
				<td>
					<div class="value-control">
					<button onclick="increment(5)">▲</button>
					<button onclick="decrement(5)">▼</button>
					</div>
				</td>
			</tr></tbody></table></div>
		</td>
		<td class="operator">+</td>
		<td>
			<div class="mod" id="modBox5"><table><tbody><tr>
				<td>
					<div class="value" id="mod5">0</div>
				</td>
				<td>
					<div class="value-control">
					<button onclick="modIncrement(5)">▲</button>
					<button onclick="modDecrement(5)">▼</button>
					</div>
				</td>
			</tr></tbody></table></div>
		</td>
		<td class="operator">=</td>
		<td class="value" id="total5">8
		</td>
		<td class="value" id="abilityMod5">-1
		</td>
	</tr>
	
    <tr>
		<td>Charisma</td>
		<td>
			<div><table><tbody><tr>
				<td>
					<div class="value" id="value6">8</div>
				</td>
				<td>
					<div class="value-control">
					<button onclick="increment(6)">▲</button>
					<button onclick="decrement(6)">▼</button>
					</div>
				</td>
			</tr></tbody></table></div>
		</td>
		<td class="operator">+</td>
		<td>
			<div class="mod" id="modBox6"><table><tbody><tr>
				<td>
					<div class="value" id="mod6">0</div>
				</td>
				<td>
					<div class="value-control">
					<button onclick="modIncrement(6)">▲</button>
					<button onclick="modDecrement(6)">▼</button>
					</div>
				</td>
			</tr></tbody></table></div>
		</td>
		<td class="operator">=</td>
		<td class="value" id="total6">8
		</td>
		<td class="value" id="abilityMod6">-1
		</td>
	</tr>
  </tbody>
</table>

		<button style="margin:auto" class="class-button" onclick="clearStats()">Clear</button>
	
  <div class="price-pool">
    <p>Total Points: <span id="pricePool">27 / 27</span></p><br>
	<p>Background Points: <span id="modifierPool">3 /3</span></p>
  </div>
	


  <script>
    const pricePoolElement = document.getElementById("pricePool");
    let pricePool = 27;
    const values = [8, 8, 8, 8, 8, 8];
    const mods = [0, 0, 0, 0, 0, 0];
	let modifiableBoxes = [];
	let modifierPool = 3;
	let initialPricePool = pricePool;
	
	const roles = {
		"Acolyte": [4, 5, 6], // Intelligence, Wisdom, Charisma
		"Artisan": [1, 2, 4], // Strength, Dexterity, Intelligence
		"Charlatan": [2, 3, 6], // Dexterity, Constitution, Charisma
		"Criminal": [2, 3, 4], // Dexterity, Constitution, Intelligence
		"Entertainer": [1, 2, 6], // Strength, Dexterity, Charisma
		"Farmer": [1, 3, 5], // Strength, Constitution, Wisdom
		"Guard": [1, 4, 5], // Strength, Intelligence, Wisdom
		"Guide": [2, 3, 5], // Dexterity, Constitution, Wisdom
		"Hermit": [3, 5, 6], // Constitution, Wisdom, Charisma
		"Merchant": [3, 4, 6], // Constitution, Intelligence, Charisma
		"Noble": [1, 4, 6], // Strength, Intelligence, Charisma
		"Sage": [3, 4, 5], // Constitution, Intelligence, Wisdom
		"Sailor": [1, 2, 5], // Strength, Dexterity, Wisdom
		"Scribe": [2, 4, 5], // Dexterity, Intelligence, Wisdom
		"Soldier": [1, 2, 3], // Strength, Dexterity, Constitution
		"Wayfarer": [2, 5, 6] // Dexterity, Wisdom, Charisma
	};
	
	const classDefault = {
		"Barbarian": [15, 13, 14, 10, 12, 8],
		"Bard": [8, 14, 12, 13, 10, 15],
		"Cleric": [14, 8, 13, 10, 15, 12],
		"Druid": [8, 12, 14, 13, 15, 10],
		"Fighter": [15, 14, 13, 8, 10, 12],
		"Monk": [12, 15, 13, 10, 14, 8],
		"Paladin": [15, 10, 13, 8, 12, 14],
		"Ranger": [12, 15, 13, 8, 14, 10],
		"Rogue": [12, 15, 13, 14, 10, 8],
		"Sorcerer": [10, 13, 14, 8, 12, 15],
		"Warlock": [8, 14, 13, 12, 10, 15],
		"Wizard": [8, 12, 13, 15, 14, 10]
	}

    const costMap = {
      8: 0,
      9: 1,
      10: 2,
      11: 3,
      12: 4,
      13: 5,
      14: 7,
      15: 9
    };
	
	const modifierMap = {
		8: -1,
		9: -1,
		10: 0,
		11: 0,
		12: 1,
		13: 1,
		14: 2,
		15: 2,
		16: 3,
		17: 3
	};

    function updateDisplay(id) {
      document.getElementById(`value${id}`).innerText = values[id - 1];
      document.getElementById(`total${id}`).innerText = values[id - 1] + mods[id - 1];
      pricePoolElement.innerText = pricePool + " / 27";
    }

    function increment(id) {
      const currentValue = values[id - 1];
      const nextValue = currentValue + 1;

      if (nextValue <= 15) {
        const currentCost = costMap[currentValue];
        const nextCost = costMap[nextValue];
        const costDifference = nextCost - currentCost;

        if (pricePool >= costDifference) {
          values[id - 1] = nextValue;
          pricePool -= costDifference;
          updateDisplay(id);
		  updateTotals();
        }
      }
    }

    function decrement(id) {
      const currentValue = values[id - 1];
      const previousValue = currentValue - 1;

      if (previousValue >= 8) {
        const currentCost = costMap[currentValue];
        const previousCost = costMap[previousValue];
        const costDifference = currentCost - previousCost;

        values[id - 1] = previousValue;
        pricePool += costDifference;
        updateDisplay(id);
		updateTotals();
      }
    }
	
	function modIncrement(id) {
		if (modifiableBoxes.includes(id) && modifierPool > 0 && mods[id - 1] < 2) {
			mods[id - 1]++;
			modifierPool--;
			document.getElementById("mod" + id).innerText = mods[id - 1];
			document.getElementById("modifierPool").innerText = modifierPool + " / 3";
			updateTotals();
		}
	}

    function modDecrement(id) {
		if (modifiableBoxes.includes(id) && mods[id - 1] > 0) {
			mods[id - 1]--;
			modifierPool++;
			document.getElementById("mod" + id).innerText = mods[id - 1];
			document.getElementById("modifierPool").innerText = modifierPool;
			updateTotals();
		}
	}
	
	function updateRole() {
		const selectedRole = document.getElementById("roleSelect").value;
		modifiableBoxes = roles[selectedRole] || [];

		// Reset modifier pool and box colors
		for (let i = 1; i <= 6; i++) {
			document.getElementById("modBox" + i).classList.remove("modifiable");
			mods[i - 1] = 0;
			document.getElementById("mod" + i).innerText = "0";
		}
		modifierPool = 3;
		document.getElementById("modifierPool").innerText = modifierPool;

		// Highlight modifiable boxes
		modifiableBoxes.forEach(boxId => {
			document.getElementById("modBox" + boxId).classList.add("modifiable");
		});

		updateTotals();
	}
	
	function updateTotals(){
		for (let i = 1; i <= 6; i++) {
			document.getElementById("total" + i).innerText = values[i - 1] + mods[i - 1];
			document.getElementById("abilityMod" + i).innerText = modifierMap[values[i - 1] + mods[i - 1]];
		}
	}
	
	function classStats() {
		const selectedClass = document.getElementById("class").value;
		let scores = [];
		scores = classDefault[selectedClass] || [];
		if (scores.length > 0) {
			pricePool = 0;
			for (let i = 1; i <= 6; i++) {
				values[i - 1] = scores[i-1];
				updateDisplay(i);
			}
			updateTotals();
		}
	}
	
	function clearStats() {
		pricePool = initialPricePool;
		modifierPool = 3;
		for (let i = 1; i <= 6; i++) {
			values[i - 1] = 8
			mods[i - 1] = 0;
			updateDisplay(i);
		}
		updateTotals();
	}
	
	function handleRaceChange() {
  const race = document.getElementById("race").value;
  const subraceContainer = document.getElementById("subrace-container");
  const subraceSelect = document.getElementById("subrace");

  // Clear existing options in subrace select
  subraceSelect.innerHTML = '';

  // Determine which subrace options to show
  if (race === "Elf") {
    subraceContainer.style.display = "block";
    addSubraceOptions(["High", "Wood", "Dark"]);
  } else if (race === "Goliath") {
    subraceContainer.style.display = "block";
    addSubraceOptions(["Cloud Giant", "Fire Giant", "Frost Giant", "Hill Giant", "Stone Giant", "Storm Giant"]);
  } else if (race === "Tiefling") {
    subraceContainer.style.display = "block";
    addSubraceOptions(["Abyssal", "Chthonic", "Infernal"]);
  } else {
    // Hide subrace dropdown if the race doesn't have subraces
    subraceContainer.style.display = "none";
  }
}

function addSubraceOptions(subraceList) {
  const subraceSelect = document.getElementById("subrace");
  subraceSelect.innerHTML = '<option value="" disabled selected>Select your subrace</option>'; // Default option
  subraceList.forEach(subrace => {
    const option = document.createElement("option");
    option.value = subrace;
    option.text = subrace;
    subraceSelect.appendChild(option);
  });
}


  </script>
</body>
</html>